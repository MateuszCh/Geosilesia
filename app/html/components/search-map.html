<div id="search"
     class="search">
    <div id="search-form"
         class="search__form"
         ng-class="{'search__form--active' : vm.showSearch}">
        <h3 class="search__form__heading">Atrakcje Geoturystyczne Województwa Śląskiego</h3>
        <form ng-submit="vm.search(vm.searchInput)">
            <div class="search__form__search">
                <input class="search__form__search__input"
                       ng-model="vm.searchInput"
                       type="text" placeholder="Wpisz szukaną lokalizację">
                <input class="search__form__search__button"
                       type="submit"
                value="">
            </div>
            <div class="search__form__category">
                <h3 class="search__form__category__heading">Kategorie:</h3>
                <div class="search__form__category__container" ng-repeat="category in ::vm.categories track by $index">
                    <input class="search__form__category__radio"
                           type="radio"
                           ng-attr-id="{{category.category}}"
                           ng-model="::vm.category"
                           value="{{::category.category}}"
                           ng-change="vm.pickCategory(vm.category)">
                    <label class="search__form__category__label" for="{{category.category}}">
                        <span class="search__form__category__label__icon"></span>
                        <span class="search__form__category__label__text"
                              ng-bind="category.name"></span>
                    </label>
                </div>
                <div class="search__form__category__container">
                    <input class="search__form__category__radio"
                           type="radio"
                           ng-model="::vm.category"
                           value="all"
                           id="all"
                           ng-change="vm.pickCategory(vm.category)">
                    <label class="search__form__category__label" for="all">
                        <span class="search__form__category__label__icon"></span>
                        <span class="search__form__category__label__text">Wszystkie</span>
                    </label>
                </div>
            </div>
        </form>
        <div class="search__form__results">
            <h3 class="search__form__results__heading">Obiekty</h3>
            <div class="search__form__results__container">
                <div class="result"
                     ng-repeat="result in vm.markers track by $index"
                     ng-if="!result.type">
                    <h4 class="result__heading"
                        ng-bind="result.title"></h4>
                    <div class="result__container">
                        <div class="result__container__location">
                            <p class="result__container__location__coordinates">Współrzędne: <span ng-bind="result.position.lat"></span>, <span ng-bind="result.position.lng"></span></p>
                            <p class="result__container__location__distance" ng-if="result.distance && vm.location">Odległość: <span ng-bind="result.distance | number : 2"></span> km</p>
                        </div>
                        <a class="result__container__directions"
                           ng-href="{{'https://www.google.com/maps/dir/Current+Location/' + result.position.lat + ',' + result.position.lng}}"
                           target="_blank">Dojazd</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="search__form__activate"
             ng-click="vm.toggleSearchPanel()">
            <img class="search__form__activate__image"
                 src="images/search-icon.png">
        </div>
    </div>
    <map class="search__container"
         ng-class="{'search__container--smaller' : vm.showSearch && ($root.isL || $root.isX)}"
         places="vm.markers"
         center-map="vm.showSearch"></map>
</div>

